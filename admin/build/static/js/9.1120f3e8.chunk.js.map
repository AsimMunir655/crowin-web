{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","config/buildFormData.js","views/pages/SettingPage/SettingPage.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_slicedToArray","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","TypeError","buildFormData","formData","data","parentKey","Date","File","append","keys","forEach","key","SettingPage","useQuery","myProfile","retry","retryDelay","refetchOnWindowFocus","onSuccess","setFirstName","user","firstName","setLastName","lastName","setPhoneNumber","phoneNumber","setImage","profilePicture","isLoading","isFetching","item","isError","useState","password","setPassword","confirmPassword","setConfirmPassword","errors","setErrors","submit","image","imagePreview","setImagePreview","queryClient","useQueryClient","mutate","useMutation","updateProfile","Swal","fire","position","icon","title","showConfirmButton","timer","invalidateQueries","onError","error","text","response","message","UpdateProfile","e","a","preventDefault","formdata","FormData","updateDataObj","console","log","useEffect","validate","rePassword","className","md","lg","xl","type","placeholder","autoComplete","onChange","target","htmlFor","accept","id","files","URL","createObjectURL","style","marginTop","rounded","thumbnail","src","width","height","onClick","color","block"],"mappings":"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","file":"static/js/9.1120f3e8.chunk.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export function buildFormData(formData, data, parentKey) {\n  if (\n    data &&\n    typeof data === \"object\" &&\n    !(data instanceof Date) &&\n    !(data instanceof File)\n  ) {\n    Object.keys(data).forEach((key) => {\n      buildFormData(\n        formData,\n        data[key],\n        parentKey ? `${parentKey}[${key}]` : key\n      );\n    });\n  } else {\n    const value = data == null ? \"\" : data;\n\n    formData.append(parentKey, value);\n  }\n}\n","import CIcon from \"@coreui/icons-react\";\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCol,\n  CContainer,\n  CForm,\n  CImg,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow,\n} from \"@coreui/react\";\nimport React, { useEffect, useState } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { buildFormData } from \"../../../config/buildFormData\";\nimport { myProfile, updateProfile } from \"../../../api/APIFunctions\";\nimport Swal from \"sweetalert2\";\n\nconst SettingPage = () => {\n  const { isLoading, isFetching, data, isError } = useQuery(\n    [\"patientProfile\"],\n    myProfile,\n    {\n      retry: 1,\n      retryDelay: 500,\n      refetchOnWindowFocus: false,\n      onSuccess: (data) => {\n        setFirstName(data?.data?.user?.firstName);\n        setLastName(data?.data?.user?.lastName);\n        setPhoneNumber(data?.data?.user?.phoneNumber);\n        setImage(data?.data?.user?.profilePicture);\n      },\n    }\n  );\n\n  const item = data?.data?.user;\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const [submit, setSubmit] = useState(false);\n  const [image, setImage] = useState();\n  const [imagePreview, setImagePreview] = useState();\n\n  const queryClient = useQueryClient();\n  const { mutate } = useMutation(updateProfile, {\n    onSuccess: (data) => {\n      Swal.fire({\n        position: \"top-end\",\n        icon: \"success\",\n        title: \"Profile Updated Successfully!!!\",\n        showConfirmButton: true,\n        timer: 2000,\n      });\n      queryClient.invalidateQueries(\"patientProfile\");\n    },\n    onError: (error) => {\n      Swal.fire({\n        position: \"top-end\",\n        icon: \"error\",\n        title: \"Profile Updated Failed!!!\",\n        text: error?.response?.data?.message,\n        showConfirmButton: true,\n        timer: 2000,\n      });\n    },\n  });\n\n  const UpdateProfile = async (e) => {\n    e.preventDefault();\n    var formdata = new FormData();\n\n    const updateDataObj = {\n      firstName,\n      lastName,\n      phoneNumber,\n      password,\n      confirmPassword,\n    };\n\n    buildFormData(formdata, updateDataObj);\n    formdata.append(\"image\", image);\n\n    try {\n      mutate(formdata);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const onFileChange = (e) => {\n    setImage(e.target.files[0]);\n    e.target.files.length > 0 &&\n      setImagePreview(URL.createObjectURL(e.target.files[0]));\n  };\n\n  //  for validations\n  useEffect(() => {\n    submit && validate();\n    return () => {};\n  }, [submit]);\n\n  const validate = () => {\n    let errors = {};\n\n    if (password !== confirmPassword)\n      errors.rePassword = \"confirm password is not matched\";\n\n    setErrors(errors);\n    return Object.keys(errors).length;\n  };\n\n  // main return\n\n  return (\n    <div className=\"c-app c-default-layout flex-row \">\n      <CContainer>\n        <CRow>\n          <CCol md=\"9\" lg=\"7\" xl=\"6\">\n            <CCard className=\"mx-4\">\n              <CCardBody className=\"p-4\">\n                <CForm>\n                  <h1>Update Profile</h1>\n\n                  <CInputGroup className=\"mt-3\">\n                    <CInputGroupPrepend>\n                      <CInputGroupText>\n                        <CIcon name=\"cil-user\" />\n                      </CInputGroupText>\n                    </CInputGroupPrepend>\n                    <CInput\n                      type=\"text\"\n                      name=\"firstName\"\n                      placeholder=\"First Name\"\n                      autoComplete=\"first-name\"\n                      value={firstName}\n                      onChange={(e) => {\n                        setFirstName(e?.target.value);\n                      }}\n                    />\n                    <CInput\n                      type=\"text\"\n                      name=\"lastName\"\n                      placeholder=\"Last Name\"\n                      autoComplete=\"last-name\"\n                      value={lastName}\n                      onChange={(e) => {\n                        setLastName(e?.target.value);\n                      }}\n                    />\n                  </CInputGroup>\n\n                  <CInputGroup className=\"mt-3\">\n                    <CInputGroupPrepend>\n                      <CInputGroupText>\n                        <CIcon name=\"cil-phone\" />\n                      </CInputGroupText>\n                    </CInputGroupPrepend>\n                    <CInput\n                      type=\"text\"\n                      name=\"phoneNumber\"\n                      placeholder=\"Phone Number\"\n                      autoComplete=\"phone-number\"\n                      value={phoneNumber}\n                      onChange={(e) => {\n                        setPhoneNumber(e?.target.value);\n                      }}\n                    />\n                  </CInputGroup>\n\n                  <CInputGroup className=\"mt-3\">\n                    <CInputGroupPrepend>\n                      <CInputGroupText>\n                        <CIcon name=\"cil-lock-locked\" />\n                      </CInputGroupText>\n                    </CInputGroupPrepend>\n                    <CInput\n                      name=\"password\"\n                      type=\"password\"\n                      placeholder=\"New Password\"\n                      value={password}\n                      autoComplete=\"new-password\"\n                      onChange={(e) => {\n                        setPassword(e?.target.value);\n                      }}\n                    />\n                  </CInputGroup>\n                  <CInputGroup className=\"mt-4\">\n                    <CInputGroupPrepend>\n                      <CInputGroupText>\n                        <CIcon name=\"cil-lock-locked\" />\n                      </CInputGroupText>\n                    </CInputGroupPrepend>\n                    <CInput\n                      type=\"password\"\n                      name=\"confirmPassword\"\n                      placeholder=\"Confirm password\"\n                      autoComplete=\"confirm-password\"\n                      value={confirmPassword}\n                      onChange={(e) => {\n                        setConfirmPassword(e?.target.value);\n                      }}\n                    />\n                  </CInputGroup>\n\n                  {errors.rePassword && (\n                    <div className=\"errorText\">{errors.rePassword}</div>\n                  )}\n\n                  <br />\n                  <div className=\"mb-3\">\n                    <CInputGroupText htmlFor=\"formFile\">\n                      Profile Picture\n                    </CInputGroupText>\n                    <CInput\n                      accept=\"images/*\"\n                      type=\"file\"\n                      id=\"formFile\"\n                      onChange={onFileChange}\n                    />\n                  </div>\n                  <CCol style={{ marginTop: \"10px\" }} md={12}>\n                    <CImg\n                      rounded\n                      thumbnail\n                      src={\n                        imagePreview\n                          ? imagePreview\n                          : `http://localhost:3000/${item?.profilePicture}`\n                      }\n                      width={200}\n                      height={200}\n                    />\n                  </CCol>\n                  <CButton\n                    className=\"mt-3\"\n                    onClick={UpdateProfile}\n                    color=\"success\"\n                    block\n                    type=\"button\"\n                  >\n                    Update Profile\n                  </CButton>\n                </CForm>\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default SettingPage;\n"],"sourceRoot":""}