(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[8],{731:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,c=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){a=!0,c=o}finally{try{r||null==s.return||s.return()}finally{if(a)throw c}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return a}))},736:function(e,t,n){"use strict";function r(e,t,n){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var a=null==t?"":t;e.append(n,a)}else Object.keys(t).forEach((function(a){r(e,t[a],n?"".concat(n,"[").concat(a,"]"):a)}))}n.d(t,"a",(function(){return r}))},786:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var r=n(415),a=n(83),c=n.n(a),i=n(143),s=n(22),o=n(731),l=n(727),u=n(1),d=n(732),j=n(150),b=n(736),m=n(114),f=n.n(m),p=n(151),h=n(70),v=n(34);function O(e){e.match;var t,n=Object(u.useState)({}),a=Object(o.a)(n,2),m=a[0],O=a[1],x=Object(u.useState)({}),y=Object(o.a)(x,2),w=(y[0],y[1]),g=Object(u.useState)(!1),N=Object(o.a)(g,2),k=N[0],C=N[1],S=Object(u.useState)(),P=Object(o.a)(S,2),A=P[0],F=P[1],U=Object(u.useState)(),B=Object(o.a)(U,2),D=B[0],E=B[1],L=Object(j.useQuery)("myProfile",{retry:1,retryDelay:500,refetchOnWindowFocus:!1}),I=L.data,M=L.isLoading,T=null===I||void 0===I||null===(t=I.data)||void 0===t?void 0:t.user,J=new FormData;Object(b.a)(J,m),J.append("image",A);var R=Object(j.useMutation)(p.d,{onSuccess:function(e,t,n){f.a.fire({position:"center",icon:"success",title:"Profile Updated",showConfirmButton:!1,timer:2e3}),O({}),C(!1),w({}),h.a.push("/admin/profile")}});Object(u.useEffect)((function(){var e,t,n,r,a,c;return O(Object(s.a)(Object(s.a)({},m),{},{firstName:null===I||void 0===I||null===(e=I.data)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.firstName,lastName:null===I||void 0===I||null===(n=I.data)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.lastName,phoneNumber:null===I||void 0===I||null===(a=I.data)||void 0===a||null===(c=a.user)||void 0===c?void 0:c.phoneNumber})),k&&Q(),function(){}}),[k]);var Q=function(){var e={};return m.password!==m.confirmPassword&&(e.rePassword="confirm password is not matched"),w(e),Object.keys(e).length},W=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),C(!0),!(Q()>0)){e.next=5;break}return e.abrupt("return");case 5:R.mutate(m);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[M&&Object(v.jsx)(d.a,{}),M||Object(v.jsx)("div",{className:"bg-white textBlack p-3 ",children:Object(v.jsxs)("div",{className:"textBlack",children:[Object(v.jsx)("h2",{className:"text-center py-3",children:"My Profile"}),Object(v.jsxs)(l.u,{className:"row g-3",onChange:function(e){var t=e.target,n=t.name,a=t.value;O(Object(s.a)(Object(s.a)({},m),{},Object(r.a)({},n,a)))},children:[Object(v.jsxs)(l.k,{md:6,children:[Object(v.jsx)(l.v,{children:"First Name"}),Object(v.jsx)(l.C,{name:"firstName",type:"text",value:null===m||void 0===m?void 0:m.firstName})]}),Object(v.jsxs)(l.k,{md:6,children:[Object(v.jsx)(l.v,{children:"Last Name"}),Object(v.jsx)(l.C,{name:"lastName",type:"text",value:null===m||void 0===m?void 0:m.lastName})]}),Object(v.jsxs)(l.k,{md:6,children:[Object(v.jsx)(l.v,{children:"Email"}),Object(v.jsx)(l.C,{disabled:!0,type:"text",value:null===T||void 0===T?void 0:T.email})]}),Object(v.jsx)("br",{}),Object(v.jsxs)(l.k,{md:6,children:[Object(v.jsx)(l.v,{children:"Phone Number"}),Object(v.jsx)(l.C,{name:"phoneNumber",type:"text",value:null===m||void 0===m?void 0:m.phoneNumber})]}),Object(v.jsxs)(l.k,{md:6,children:[Object(v.jsx)(l.v,{children:"Password"}),Object(v.jsx)(l.C,{name:"password",type:"password"})]}),Object(v.jsxs)(l.k,{md:6,children:[Object(v.jsx)(l.v,{children:"Confirm Password"}),Object(v.jsx)(l.C,{name:"confirmPassword",type:"password"})]}),Object(v.jsx)(l.k,{style:{marginTop:"10px"},md:12,children:Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)(l.C,{accept:"images/*",type:"file",id:"formFile",onChange:function(e){F(e.target.files[0]),e.target.files.length>0&&E(URL.createObjectURL(e.target.files[0]))}})})}),Object(v.jsx)(l.k,{style:{marginTop:"10px"},md:12,children:Object(v.jsx)(l.B,{rounded:!0,thumbnail:!0,src:D||"https://crowin-backend.herokuapp.com/".concat(null===T||void 0===T?void 0:T.profilePicture),width:200,height:200})}),Object(v.jsx)(l.k,{md:2,children:Object(v.jsx)(l.e,{className:"mt-3",color:"primary",variant:"outline",shape:"pill",type:"button",onClick:W,children:"Update Profile"})})]})]})})]})}}}]);
//# sourceMappingURL=8.b821764c.chunk.js.map